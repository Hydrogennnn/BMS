(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2411b074"],{"8bf3":function(e,t,o){"use strict";o.r(t);var a=o("c1b7");const n={class:"book-grid"},c={class:"book-content"},i=["src"],r={class:"book-text"},l={class:"book-name"},s={class:"book-author"},d=["innerHTML"];function b(e,t,o,b,h,u){const g=Object(a["resolveComponent"])("el-card"),m=Object(a["resolveComponent"])("el-pagination");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createVNode"])(g,{style:{width:"80%",margin:"40px auto"}},{default:Object(a["withCtx"])(()=>[t[1]||(t[1]=Object(a["createElementVNode"])("h2",{style:{padding:"30px"}},"馆藏书籍",-1)),Object(a["createElementVNode"])("div",n,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(h.bookList,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(g,{key:t,class:"book-item",onClick:t=>u.gotoDetail(e.id),shadow:"hover"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",c,[Object(a["createElementVNode"])("img",{src:e.imgHref,alt:"书籍封面",class:"book-image"},null,8,i),Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("h3",l,Object(a["toDisplayString"])(e.name),1),Object(a["createElementVNode"])("p",s,Object(a["toDisplayString"])(e.author),1),Object(a["createElementVNode"])("p",{class:"book-intro",innerHTML:e.intro.length>100?e.intro.slice(0,100)+"...":e.intro},null,8,d)])])]),_:2},1032,["onClick"]))),128))])]),_:1}),Object(a["createVNode"])(m,{modelValue:h.currentPage,"onUpdate:modelValue":t[0]||(t[0]=e=>h.currentPage=e),"page-sizes":[9,12],"page-size":h.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:h.total,onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange},null,8,["modelValue","page-size","total","onSizeChange","onCurrentChange"])])}o("8180");var h=o("b775"),u=o("b9cb"),g=o("a18c"),m={name:"LatestBook",data(){return{currentPage:1,pageSize:9,total:10,bookList:[],selectedBook:null}},methods:{async fetchBook(){try{const e=await h["a"].get("/book",{params:{pageNum:this.currentPage,pageSize:this.pageSize}});this.bookList=e.data.records,this.total=e.data.total}catch(e){console.error("获取最新图书信息失败:",e),u["a"].error("获取最新图书信息失败，请稍后重试。")}},handleSizeChange(e){this.pageSize=e,this.fetchBook()},handleCurrentChange(e){this.currentPage=e,this.fetchBook()},showDetail(e){this.selectedBook=e},closeDetail(){this.selectedBook=null},formatDate(e){return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(e))},gotoDetail(e){g["a"].push({name:"BookDetail",params:{id:e}})}},mounted(){this.fetchBook()}},p=(o("d1bc"),o("9c21")),k=o.n(p);const j=k()(m,[["render",b],["__scopeId","data-v-681f019a"]]);t["default"]=j},"9b92":function(e,t,o){},d1bc:function(e,t,o){"use strict";o("9b92")}}]);
//# sourceMappingURL=chunk-2411b074.f26f9a5f.js.map