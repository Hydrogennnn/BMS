(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-863f5212"],{"17ac":function(e,t,a){},"4f4e":function(e,t,a){"use strict";a("17ac")},"8bf3":function(e,t,a){"use strict";a.r(t);var c=a("c1b7");const o={class:"home"},l={style:{margin:"10px 0"}},r={class:"book-grid"},n={class:"book-content"},i=["src"],s={class:"book-text"},d={class:"book-name"},b={class:"book-author"},h=["innerHTML"];function u(e,t,a,u,j,m){const O=Object(c["resolveComponent"])("search"),p=Object(c["resolveComponent"])("el-icon"),g=Object(c["resolveComponent"])("el-input"),C=Object(c["resolveComponent"])("el-form-item"),V=Object(c["resolveComponent"])("svg-icon"),k=Object(c["resolveComponent"])("el-button"),f=Object(c["resolveComponent"])("el-form"),N=Object(c["resolveComponent"])("el-card"),w=Object(c["resolveComponent"])("el-pagination");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createVNode"])(N,{style:{width:"80%",margin:"40px auto"}},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",l,[Object(c["createVNode"])(f,{inline:"true",size:"small"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(C,{label:"图书编号"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(g,{modelValue:j.search1,"onUpdate:modelValue":t[0]||(t[0]=e=>j.search1=e),placeholder:"请输入图书编号",clearable:""},{prefix:Object(c["withCtx"])(()=>[Object(c["createVNode"])(p,{class:"el-input__icon"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(O)]),_:1})]),_:1},8,["modelValue"])]),_:1}),Object(c["createVNode"])(C,{label:"图书名称"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(g,{modelValue:j.search2,"onUpdate:modelValue":t[1]||(t[1]=e=>j.search2=e),placeholder:"请输入图书名称",clearable:""},{prefix:Object(c["withCtx"])(()=>[Object(c["createVNode"])(p,{class:"el-input__icon"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(O)]),_:1})]),_:1},8,["modelValue"])]),_:1}),Object(c["createVNode"])(C,{label:"作者"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(g,{modelValue:j.search3,"onUpdate:modelValue":t[2]||(t[2]=e=>j.search3=e),placeholder:"请输入作者",clearable:""},{prefix:Object(c["withCtx"])(()=>[Object(c["createVNode"])(p,{class:"el-input__icon"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(O)]),_:1})]),_:1},8,["modelValue"])]),_:1}),Object(c["createVNode"])(C,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(k,{type:"primary",style:{"margin-left":"1%"},onClick:m.fetchBook,size:"mini"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(V,{iconClass:"search"}),t[4]||(t[4]=Object(c["createTextVNode"])("查询"))]),_:1},8,["onClick"])]),_:1}),Object(c["createVNode"])(C,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(k,{size:"mini",type:"danger",onClick:m.clear},{default:Object(c["withCtx"])(()=>t[5]||(t[5]=[Object(c["createTextVNode"])("重置")])),_:1},8,["onClick"])]),_:1})]),_:1})]),t[6]||(t[6]=Object(c["createElementVNode"])("h2",{style:{padding:"30px"}},"馆藏书籍",-1)),Object(c["createElementVNode"])("div",r,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(j.bookList,(e,t)=>(Object(c["openBlock"])(),Object(c["createBlock"])(N,{key:t,class:"book-item",onClick:t=>m.gotoDetail(e.id),shadow:"hover"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("img",{src:e.imgHref,alt:"书籍封面",class:"book-image"},null,8,i),Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("h3",d,Object(c["toDisplayString"])(e.name),1),Object(c["createElementVNode"])("p",b,Object(c["toDisplayString"])(e.author),1),Object(c["createElementVNode"])("p",{class:"book-intro",innerHTML:e.intro.length>100?e.intro.slice(0,100)+"...":e.intro},null,8,h)])])]),_:2},1032,["onClick"]))),128))])]),_:1}),Object(c["createVNode"])(w,{modelValue:j.currentPage,"onUpdate:modelValue":t[3]||(t[3]=e=>j.currentPage=e),"page-sizes":[9,12],"page-size":j.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:j.total,onSizeChange:m.handleSizeChange,onCurrentChange:m.handleCurrentChange},null,8,["modelValue","page-size","total","onSizeChange","onCurrentChange"])])}a("8180");var j=a("b775"),m=a("b9cb"),O=a("a18c"),p={name:"LatestBook",data(){return{currentPage:1,pageSize:9,total:10,bookList:[],selectedBook:null,search1:"",search2:"",search3:""}},methods:{async fetchBook(){try{const e=await j["a"].get("/book",{params:{pageNum:this.currentPage,pageSize:this.pageSize,search1:this.search1,search2:this.search2,search3:this.search3}});this.bookList=e.data.records,this.total=e.data.total}catch(e){console.error("获取最新图书信息失败:",e),m["a"].error("获取最新图书信息失败，请稍后重试。")}},handleSizeChange(e){this.pageSize=e,this.fetchBook()},clear(){this.search1="",this.search2="",this.search3=""},handleCurrentChange(e){this.currentPage=e,this.fetchBook()},showDetail(e){this.selectedBook=e},closeDetail(){this.selectedBook=null},formatDate(e){return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(e))},gotoDetail(e){O["a"].push({name:"BookDetail",params:{id:e}})}},mounted(){this.fetchBook()}},g=(a("4f4e"),a("9c21")),C=a.n(g);const V=C()(p,[["render",u],["__scopeId","data-v-65a29a14"]]);t["default"]=V}}]);
//# sourceMappingURL=chunk-863f5212.c2b976a3.js.map