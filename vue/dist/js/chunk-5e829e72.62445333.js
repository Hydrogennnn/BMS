(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e829e72"],{"349a":function(e,t,o){"use strict";o("cac2")},"5c64":function(e,t,o){"use strict";o("95fc")},"73cf":function(e,t,o){"use strict";o.r(t);o("8180");var r=o("c1b7");const a={class:"login-container"},c={style:{display:"flex"}};function l(e,t,o,l,d,i){const n=Object(r["resolveComponent"])("User"),s=Object(r["resolveComponent"])("el-icon"),u=Object(r["resolveComponent"])("el-input"),m=Object(r["resolveComponent"])("el-form-item"),b=Object(r["resolveComponent"])("Lock"),f=Object(r["resolveComponent"])("el-radio"),h=Object(r["resolveComponent"])("ValidCode"),p=Object(r["resolveComponent"])("el-button"),j=Object(r["resolveComponent"])("el-form");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",a,[Object(r["createVNode"])(j,{ref:"form",model:d.form,rules:d.rules,class:"login-page"},{default:Object(r["withCtx"])(()=>[t[12]||(t[12]=Object(r["createElementVNode"])("h2",{class:"title",style:{"margin-bottom":"20px"}},"用户注册",-1)),Object(r["createVNode"])(m,{prop:"username"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(u,{modelValue:d.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>d.form.username=e),placeholder:"请输入用户名",clearable:""},{prefix:Object(r["withCtx"])(()=>[Object(r["createVNode"])(s,{class:"el-input__icon"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(n)]),_:1})]),_:1},8,["modelValue"])]),_:1}),Object(r["createVNode"])(m,{prop:"password"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(u,{modelValue:d.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>d.form.password=e),placeholder:"请输入密码",clearable:"","show-password":""},{prefix:Object(r["withCtx"])(()=>[Object(r["createVNode"])(s,{class:"el-input__icon"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(b)]),_:1})]),_:1},8,["modelValue"])]),_:1}),Object(r["createVNode"])(m,{prop:"confirm"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(u,{modelValue:d.form.confirm,"onUpdate:modelValue":t[2]||(t[2]=e=>d.form.confirm=e),placeholder:"请再次确认密码",clearable:"","show-password":""},{prefix:Object(r["withCtx"])(()=>[Object(r["createVNode"])(s,{class:"el-input__icon"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(b)]),_:1})]),_:1},8,["modelValue"])]),_:1}),Object(r["createVNode"])(m,{prop:"role"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(f,{modelValue:d.form.role,"onUpdate:modelValue":t[3]||(t[3]=e=>d.form.role=e),label:"2"},{default:Object(r["withCtx"])(()=>t[8]||(t[8]=[Object(r["createTextVNode"])("读者")])),_:1},8,["modelValue"]),Object(r["createVNode"])(f,{modelValue:d.form.role,"onUpdate:modelValue":t[4]||(t[4]=e=>d.form.role=e),label:"1"},{default:Object(r["withCtx"])(()=>t[9]||(t[9]=[Object(r["createTextVNode"])("管理员")])),_:1},8,["modelValue"])]),_:1}),1==d.form.role?(Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:0,prop:"authorize"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(u,{modelValue:d.form.authorize,"onUpdate:modelValue":t[5]||(t[5]=e=>d.form.authorize=e),placeholder:"请输入管理员注册码",clearable:"","show-password":""},{prefix:Object(r["withCtx"])(()=>[Object(r["createVNode"])(s,{class:"el-input__icon"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(b)]),_:1})]),_:1},8,["modelValue"])]),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",c,[Object(r["createVNode"])(u,{modelValue:d.form.validCode,"onUpdate:modelValue":t[6]||(t[6]=e=>d.form.validCode=e),style:{width:"45%"},placeholder:"请输入验证码"},null,8,["modelValue"]),Object(r["createVNode"])(h,{onInput:i.createValidCode,style:{width:"50%"}},null,8,["onInput"])])]),_:1}),Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(p,{type:"primary",style:{width:"100%"},onClick:i.register},{default:Object(r["withCtx"])(()=>t[10]||(t[10]=[Object(r["createTextVNode"])("注 册")])),_:1},8,["onClick"])]),_:1}),Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(p,{type:"text",onClick:t[7]||(t[7]=t=>e.$router.push("/login"))},{default:Object(r["withCtx"])(()=>t[11]||(t[11]=[Object(r["createTextVNode"])("前往登录>> ")])),_:1})]),_:1})]),_:1},8,["model","rules"])])}var d=o("b775"),i=o("b9cb"),n=o("df8f"),s={name:"Login",components:{ValidCode:n["a"]},data(){return{form:{},validCode:"",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:13,message:"长度要求为2到13位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirm:[{required:!0,message:"请确认密码",trigger:"blur"}],authorize:[{required:!0,message:"请输入注册码",trigger:"blur"}]}}},methods:{createValidCode(e){this.validCode=e},register(){this.$refs["form"].validate(e=>{if(e){if(!this.form.validCode)return void i["a"].error("请填写验证码");if(this.form.validCode.toLowerCase()!==this.validCode.toLowerCase())return void i["a"].error("验证码错误");if(this.form.password!=this.form.confirm)return void i["a"].error("两次密码输入不一致");if(1==this.form.role&&"1234"!=this.form.authorize)return void i["a"].error("请输入正确的注册码");d["a"].post("user/register",this.form).then(e=>{0==e.code?(i["a"].success("注册成功"),this.$router.push("/login")):i["a"].error(e.msg)})}})}}},u=(o("5c64"),o("9c21")),m=o.n(u);const b=m()(s,[["render",l],["__scopeId","data-v-70b225b5"]]);t["default"]=b},"95fc":function(e,t,o){},cac2:function(e,t,o){},df8f:function(e,t,o){"use strict";var r=o("c1b7");function a(e,t,o,a,c,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"ValidCode disabled-select",style:Object(r["normalizeStyle"])(`width:${o.width}; height:${o.height}`),onClick:t[0]||(t[0]=(...e)=>l.refreshCode&&l.refreshCode(...e))},[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(c.codeList,(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",{key:t,style:Object(r["normalizeStyle"])(l.getStyle(e))},Object(r["toDisplayString"])(e.code),5))),128))],4)}o("8180");var c={name:"ValidCode",model:{prop:"value",event:"input"},props:{width:{type:String,default:"100px"},height:{type:String,default:"40px"},length:{type:Number,default:4},refresh:{type:Number}},data(){return{codeList:[]}},watch:{refresh(){this.createdCode()}},mounted(){this.createdCode()},methods:{refreshCode(){this.createdCode()},createdCode(){const e=this.length,t=[],o="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",r=o.length;for(let a=0;a<e;a++){const e=[Math.round(220*Math.random()),Math.round(240*Math.random()),Math.round(200*Math.random())];t.push({code:o.charAt(Math.floor(Math.random()*r)),color:`rgb(${e})`,fontSize:+[Math.floor(10*Math.random())]+6+10+"px",padding:[Math.floor(10*Math.random())]+"px",transform:`rotate(${Math.floor(90*Math.random())-Math.floor(90*Math.random())}deg)`})}this.codeList=t,this.$emit("input",t.map(e=>e.code).join(""))},getStyle(e){return`color: ${e.color}; font-size: ${e.fontSize}; padding: ${e.padding}; transform: ${e.transform}`}}},l=(o("349a"),o("9c21")),d=o.n(l);const i=d()(c,[["render",a],["__scopeId","data-v-4bf328f2"]]);t["a"]=i}}]);
//# sourceMappingURL=chunk-5e829e72.62445333.js.map